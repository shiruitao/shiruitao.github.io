<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>golang的strings原码 | Personal Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="strings.go  Count计算字符串sep在s中的非重叠个数如果sep为””,返回s的字符个数+1  12345678func Count(s, sep string) int  func main() &amp;#123;      s := &amp;quot;Hello,世界!!!!!&amp;quot;">
<meta name="keywords" content="go笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="golang的strings原码">
<meta property="og:url" content="shiruitao.github.io/2018/01/27/golang的strings原码/index.html">
<meta property="og:site_name" content="Personal Blog">
<meta property="og:description" content="strings.go  Count计算字符串sep在s中的非重叠个数如果sep为””,返回s的字符个数+1  12345678func Count(s, sep string) int  func main() &amp;#123;      s := &amp;quot;Hello,世界!!!!!&amp;quot;      n := strings.Count(s, &amp;quot;!&amp;quot;)      fmt.">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-02-27T15:14:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="golang的strings原码">
<meta name="twitter:description" content="strings.go  Count计算字符串sep在s中的非重叠个数如果sep为””,返回s的字符个数+1  12345678func Count(s, sep string) int  func main() &amp;#123;      s := &amp;quot;Hello,世界!!!!!&amp;quot;      n := strings.Count(s, &amp;quot;!&amp;quot;)      fmt.">
  
    <link rel="alternate" href="/atom.xml" title="Personal Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Personal Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">personal blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="shiruitao.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-golang的strings原码" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/27/golang的strings原码/" class="article-date">
  <time datetime="2018-01-27T08:01:47.000Z" itemprop="datePublished">2018-01-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      golang的strings原码
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="strings-go"><a href="#strings-go" class="headerlink" title="strings.go"></a>strings.go</h2><hr>
<ol>
<li>Count<br>计算字符串sep在s中的非重叠个数<br>如果sep为””,返回s的字符个数+1  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func Count(s, sep string) int  </span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;Hello,世界!!!!!&quot;  </span><br><span class="line">    n := strings.Count(s, &quot;!&quot;)  </span><br><span class="line">    fmt.Println(n) // 5  </span><br><span class="line">    n = strings.Count(s, &quot;!!&quot;)  </span><br><span class="line">    fmt.Println(n) // 2  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<a id="more"></a>
<ol>
<li><p>Contains<br>判断字符串 s 中是否包含子串 substr<br>如果 substr 为空，则返回 true  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func ContainsRune(s string, r rune) bool</span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;Hello,世界!!!!!&quot;  </span><br><span class="line">    b := strings.Contains(s, &quot;!!&quot;)  </span><br><span class="line">    fmt.Println(b) // true  </span><br><span class="line">    b = strings.Contains(s, &quot;!?&quot;)  </span><br><span class="line">    fmt.Println(b) // false  </span><br><span class="line">    b = strings.Contains(s, &quot;&quot;)  </span><br><span class="line">    fmt.Println(b) // true  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ContainsAny<br>判断字符串 s 中是否包含 chars 中的任何一个字符<br>如果 chars 为空，则返回 true  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func ContainsRune(s string, r rune) bool  </span><br><span class="line"></span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;Hello,世界!&quot;  </span><br><span class="line">    b := strings.ContainsAny(s, &quot;abc&quot;)  </span><br><span class="line">    fmt.Println(b) // false  </span><br><span class="line">    b = strings.ContainsAny(s, &quot;def&quot;)  </span><br><span class="line">    fmt.Println(b) // true  </span><br><span class="line">    b = strings.Contains(s, &quot;&quot;)  </span><br><span class="line">    fmt.Println(b) // true  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ContainsRune<br>ContainsRune 判断字符串 s 中是否包含字符 r  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func ContainsRune(s string, r rune) bool</span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;Hello,世界!&quot;  </span><br><span class="line">    b := strings.ContainsRune(s, &apos;\n&apos;)  </span><br><span class="line">    fmt.Println(b) // false  </span><br><span class="line">    b = strings.ContainsRune(s, &apos;界&apos;)  </span><br><span class="line">    fmt.Println(b) // true  </span><br><span class="line">    b = strings.ContainsRune(s, 0)  </span><br><span class="line">    fmt.Println(b) // false  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Index<br>Index 返回子串 sep 在字符串 s 中第一次出现的位置<br>如果找不到，则返回 -1，如果 sep 为空，则返回 0  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func Index(s, sep string) int  </span><br><span class="line"></span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;Hello,世界!&quot;  </span><br><span class="line">    i := strings.Index(s, &quot;h&quot;)  </span><br><span class="line">    fmt.Println(i) // -1  </span><br><span class="line">    i = strings.Index(s, &quot;H&quot;)  </span><br><span class="line">    fmt.Println(i) // 0  </span><br><span class="line">    i = strings.Index(s, &quot;!&quot;)  </span><br><span class="line">    fmt.Println(i) // 12  </span><br><span class="line">    i = strings.Index(s, &quot;&quot;)  </span><br><span class="line">    fmt.Println(i) // 0  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>IndexFunc<br>返回 s 中第一个满足 f(rune) 的字符的字节位置。<br>如果没有满足 f(rune) 的字符，则返回 -1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func IndexFunc(s string, f func(rune) bool) int</span><br><span class="line"></span><br><span class="line">func isSlash(r rune) bool &#123;  </span><br><span class="line">    return r == &apos;\\&apos; || r == &apos;/&apos;  </span><br><span class="line">&#125;  </span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;C:\\Windows\\System32&quot;  </span><br><span class="line">    i := strings.IndexFunc(s, isSlash)  </span><br><span class="line">    fmt.Printf(&quot;%v\n&quot;, i) // 2  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>LastIndexFunc<br>返回 s 中最后一个满足 f(rune) 的字符的字节位置<br>如果没有满足 f(rune) 的字符，则返回 -1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func LastIndexFunc(s string, f func(rune) bool) int</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>LastIndex<br>返回 ==子串== sep 在字符串 s 中最后一次出现的位置<br>如果找不到，则返回 -1，如果 sep 为空，则返回字符串的长度  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func LastIndex(s, sep string) int</span><br></pre></td></tr></table></figure>
</li>
<li><p>IndexRune<br>返回 ==字符== r 在字符串 s 中第一次出现的位置<br>如果找不到，则返回 -1  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func IndexRune(s string, r rune) int</span><br></pre></td></tr></table></figure>
</li>
<li><p>IndexAny<br>返回字符串 chars 中的任何一个字符在字符串 s 中第一次出现的位置<br>如果找不到，则返回 -1，如果 chars 为空，则返回 -1  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func IndexAny(s, chars string) int</span><br></pre></td></tr></table></figure>
</li>
<li><p>LastIndexAny</p>
</li>
<li><p>Split<br>以 sep 为分隔符，将 s 切分成多个子切片，结果中不包含 sep 本身<br>如果 sep 为空，则将 s 切分成 Unicode 字符列表<br>如果 s 中没有 sep 子串，则将整个 s 作为 []string 的第一个元素返回  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Split(s, sep string) []string</span><br></pre></td></tr></table></figure>
</li>
<li><p>SplitN<br>如果 n 为 0，则返回 nil，如果 n 小于 0，则不限制切分个数，全部切分  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func SplitN(s, sep string, n int) []string</span><br></pre></td></tr></table></figure>
</li>
<li><p>SplitAfter<br>SplitAfter 以 sep 为分隔符，将 s 切分成多个子切片，结果中包含 sep 本身<br>如果 sep 为空，则将 s 切分成 Unicode 字符列表<br>如果 s 中没有 sep 子串，则将整个 s 作为 []string 的第一个元素返回  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func SplitAfter(s, sep string) []string</span><br></pre></td></tr></table></figure>
</li>
<li><p>SplitAfterN<br>参数 n 表示最多切分出几个子串，超出的部分将不再切分<br>如果 n 为 0，则返回 nil，如果 n 小于 0，则不限制切分个数，全部切分  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func SplitAfterN(s, sep string, n int) []string</span><br></pre></td></tr></table></figure>
</li>
<li><p>Fields<br>以连续的空白字符为分隔符，将 s 切分成多个子串，结果中不包含空白字符本身<br>空白字符有：\t, \n, \v, \f, \r, ‘ ‘, U+0085 (NEL), U+00A0 (NBSP)<br>如果 s 中只包含空白字符，则返回一个空列表  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Fields(s string) []string</span><br></pre></td></tr></table></figure>
</li>
<li><p>FieldsFunc<br>以一个或多个满足 f(rune) 的字符为分隔符，<br>将 s 切分成多个子串，结果中不包含分隔符本身。<br>如果 s 中没有满足 f(rune) 的字符，则返回一个空列表。<br>func FieldsFunc(s string, f func(rune) bool) []string  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func isSlash(r rune) bool &#123;  </span><br><span class="line">    return r == &apos;\\&apos; || r == &apos;/&apos;  </span><br><span class="line">&#125;  </span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;C:\\Windows\\System32\\FileName&quot;  </span><br><span class="line">    ss := strings.FieldsFunc(s, isSlash)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ss) // [&quot;C:&quot; &quot;Windows&quot; &quot;System32&quot; &quot;FileName&quot;]  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Join<br>将 a 中的子串连接成一个单独的字符串，子串之间用 sep 分隔  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">func Join(a []string, sep string) string</span><br><span class="line"></span><br><span class="line">func main() &#123;  </span><br><span class="line">    ss := []string&#123;&quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;&#125;  </span><br><span class="line">    s := strings.Join(ss, &quot;|&quot;)  </span><br><span class="line">    fmt.Println(s)  // Monday|Tuesday|Wednesday  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HasPrefix<br>判断字符串 s 是否以 prefix 开头  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func HasPrefix(s, prefix string) bool</span><br></pre></td></tr></table></figure>
</li>
<li><p>HasSuffix<br>判断字符串 s 是否以 prefix 结尾  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func HasSuffix(s, suffix string) bool</span><br></pre></td></tr></table></figure>
</li>
<li><p>Map<br>将 s 中满足 mapping(rune) 的字符替换为 mapping(rune) 的返回值。<br>如果 mapping(rune) 返回负数，则相应的字符将被删除   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func Map(mapping func(rune) rune, s string) string</span><br><span class="line"></span><br><span class="line">func mapping(r rune) rune &#123;  </span><br><span class="line">    if r == &apos;\\&apos; &#123;  </span><br><span class="line">        return &apos;/&apos;  </span><br><span class="line">    &#125;  </span><br><span class="line">    return r  </span><br><span class="line">&#125;  </span><br><span class="line">func main() &#123;  </span><br><span class="line">  </span><br><span class="line">    s := &quot;C:\\Windows\\System32\\FileName&quot;  </span><br><span class="line">    ms := strings.Map(mapping, s)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ms) // &quot;C:/Windows/System32/FileName&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Repeat<br>将 count 个 s 字符串连接成一个新的字符串  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Repeat(s string, count int) string</span><br></pre></td></tr></table></figure>
</li>
<li><p>ToUpper / ToLower<br>将 s 中的所有字符修改为其大写/小写格式<br>对于非 ASCII 字符，它的大写/小写格式需要查表转换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func ToUpper(s string) string</span><br></pre></td></tr></table></figure>
</li>
<li><p>ToTitle<br>将 s 中的所有字符修改为其 Title 格式<br>大部分字符的 Title 格式就是其 Upper 格式<br>只有少数字符的 Title 格式是特殊字符<br>这里的 ToTitle 主要给 Title 函数调用  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">func ToTitle(s string) string</span><br><span class="line"></span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;heLLo worLd Ａｂｃ&quot;  </span><br><span class="line">    us := strings.ToUpper(s)  </span><br><span class="line">    ls := strings.ToLower(s)  </span><br><span class="line">    ts := strings.ToTitle(s)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, us) // &quot;HELLO WORLD ＡＢＣ&quot;  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ls) // &quot;hello world ａｂｃ&quot;  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ts) // &quot;HELLO WORLD ＡＢＣ&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取非 ASCII 字符的 Title 格式列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;  </span><br><span class="line">    for _, cr := range unicode.CaseRanges &#123;  </span><br><span class="line">        // u := uint32(cr.Delta[unicode.UpperCase]) // 大写格式  </span><br><span class="line">        // l := uint32(cr.Delta[unicode.LowerCase]) // 小写格式  </span><br><span class="line">        t := uint32(cr.Delta[unicode.TitleCase]) // Title 格式  </span><br><span class="line">        // if t != 0 &amp;&amp; t != u &#123;  </span><br><span class="line">        if t != 0 &#123;  </span><br><span class="line">            for i := cr.Lo; i &lt;= cr.Hi; i++ &#123;  </span><br><span class="line">                fmt.Printf(&quot;%c -&gt; %c\n&quot;, i, i+t)  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ToUpperSpecial<br>将 s 中的所有字符修改为其大写格式<br>优先使用 _case 中的规则进行转换  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func ToUpperSpecial(_case unicode.SpecialCase, s string) string</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ToLowerSpecial<br>将 s 中的所有字符修改为其小写格式。<br>优先使用 _case 中的规则进行转换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func ToLowerSpecial(_case unicode.SpecialCase, s string) string</span><br></pre></td></tr></table></figure></p>
<p>ToTitleSpecial<br>将 s 中的所有字符修改为其 Title 格式。<br>优先使用 _case 中的规则进行转换<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func ToTitleSpecial(_case unicode.SpecialCase, s string) string</span><br></pre></td></tr></table></figure></p>
<p>_case 规则说明，以下列语句为例：<br>unicode.CaseRange{‘A’, ‘Z’, [unicode.MaxCase]rune{3, -3, 0}}<br>·其中 ‘A’, ‘Z’ 表示此规则只影响 ‘A’ 到 ‘Z’ 之间的字符。<br>·其中 [unicode.MaxCase]rune 数组表示：<br>当使用 ToUpperSpecial 转换时，将字符的 Unicode 编码与第一个元素值（3）相加<br>当使用 ToLowerSpecial 转换时，将字符的 Unicode 编码与第二个元素值（-3）相加<br>当使用 ToTitleSpecial 转换时，将字符的 Unicode 编码与第三个元素值（0）相加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">func main() &#123;  </span><br><span class="line">    // 定义转换规则  </span><br><span class="line">    var _MyCase = unicode.SpecialCase&#123;  </span><br><span class="line">        // 将半角逗号替换为全角逗号，ToTitle 不处理  </span><br><span class="line">        unicode.CaseRange&#123;&apos;,&apos;, &apos;,&apos;,  </span><br><span class="line">            [unicode.MaxCase]rune&#123;&apos;，&apos; - &apos;,&apos;, &apos;，&apos; - &apos;,&apos;, 0&#125;&#125;,  </span><br><span class="line">        // 将半角句号替换为全角句号，ToTitle 不处理  </span><br><span class="line">        unicode.CaseRange&#123;&apos;.&apos;, &apos;.&apos;,  </span><br><span class="line">            [unicode.MaxCase]rune&#123;&apos;。&apos; - &apos;.&apos;, &apos;。&apos; - &apos;.&apos;, 0&#125;&#125;,  </span><br><span class="line">        // 将 ABC 分别替换为全角的 ＡＢＣ、ａｂｃ，ToTitle 不处理  </span><br><span class="line">        unicode.CaseRange&#123;&apos;A&apos;, &apos;C&apos;,  </span><br><span class="line">            [unicode.MaxCase]rune&#123;&apos;Ａ&apos; - &apos;A&apos;, &apos;ａ&apos; - &apos;A&apos;, 0&#125;&#125;,  </span><br><span class="line">    &#125;  </span><br><span class="line">    s := &quot;ABCDEF,abcdef.&quot;  </span><br><span class="line">    us := strings.ToUpperSpecial(_MyCase, s)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, us) // &quot;ＡＢＣDEF，ABCDEF。&quot;  </span><br><span class="line">    ls := strings.ToLowerSpecial(_MyCase, s)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ls) // &quot;ａｂｃdef，abcdef。&quot;  </span><br><span class="line">    ts := strings.ToTitleSpecial(_MyCase, s)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ts) // &quot;ABCDEF,ABCDEF.&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol>
<li><p>Title<br>将 s 中的所有 ==单词== 的首字母修改为其 Title 格式<br>BUG: Title 规则不能正确处理 Unicode 标点符号  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Title(s string) string</span><br></pre></td></tr></table></figure>
</li>
<li><p>Trim<br>将删除 s 首尾连续的包含在 cutset 中的字符  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Trim(s string, cutset string) string</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>TrimFunc<br>将删除 s 首尾连续的满足 f(rune) 的字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func TrimFunc(s string, f func(rune) bool) </span><br><span class="line"></span><br><span class="line">func isSlash(r rune) bool &#123;  </span><br><span class="line">    return r == &apos;\\&apos; || r == &apos;/&apos;  </span><br><span class="line">&#125;  </span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;\\\\HostName\\C\\Windows\\&quot;  </span><br><span class="line">    ts := strings.TrimFunc(s, isSlash)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ts) // &quot;HostName\\C\\Windows&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>TrimLeftFunc<br>将删除 s 头部连续的满足 f(rune) 的字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func TrimLeftFunc(s string, f func(rune) bool) string</span><br></pre></td></tr></table></figure></p>
<p>TrimRightFunc<br>将删除 s 尾部连续的满足 f(rune) 的字符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func TrimRightFunc(s string, f func(rune) bool) string</span><br><span class="line"></span><br><span class="line">func isSlash(r rune) bool &#123;  </span><br><span class="line">    return r == &apos;\\&apos; || r == &apos;/&apos;  </span><br><span class="line">&#125;  </span><br><span class="line">func main() &#123;  </span><br><span class="line">    s := &quot;\\\\HostName\\C\\Windows\\&quot;  </span><br><span class="line">    ts := strings.TrimRightFunc(s, isSlash)  </span><br><span class="line">    fmt.Printf(&quot;%q\n&quot;, ts) // &quot;\\\\HostName\\C\\Windows&quot;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>TrimSpace<br>将删除 s 首尾连续的的空白字符</p>
<ol>
<li>TrimPrefix<br>删除 s 头部的 prefix 字符串<br>如果 s 不是以 prefix 开头，则返回原始 s  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func TrimPrefix(s, prefix string) string</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>TrimSuffix<br>删除 s 尾部的 suffix 字符串<br>如果 s 不是以 suffix 结尾，则返回原始 s<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func TrimSuffix(s, suffix string) string</span><br></pre></td></tr></table></figure></p>
<p>注：TrimSuffix只是去掉s字符串结尾的suffix字符串，只是去掉１次，<br>而TrimRight是一直去掉s字符串右边的字符串，只要有响应的字符串就去掉，<br>是一个多次的过程，这也是二者的本质区别.</p>
<ol>
<li><p>Replace<br>返回 s 的副本，并将副本中的 old 字符串替换为 new 字符串,<br>替换次数为 n 次，如果 n 为 -1，则全部替换<br>如果 old 为空，则在副本的每个字符之间都插入一个 new  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func Replace(s, old, new string, n int) string</span><br></pre></td></tr></table></figure>
</li>
<li><p>EqualFold<br>判断 s 和 t 是否相等。忽略大小写，同时它还会对特殊字符进行转换<br>比如将“ϕ”转换为“Φ”、将“Ǆ”转换为“ǅ”等，然后再进行比较  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func EqualFold(s, t string) bool</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<p>  <a href="http://blog.csdn.net/chenbaoke/article/details/40318423" target="_blank" rel="noopener">参考来源: http://blog.csdn.net/chenbaoke/article/details/40318423</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="shiruitao.github.io/2018/01/27/golang的strings原码/" data-id="cje5sm69q0000t0hn1ri5h2jd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/go笔记/">go笔记</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2018/01/26/发表文章/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">发表文章</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/go笔记/">go笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/go笔记/" style="font-size: 10px;">go笔记</a> <a href="/tags/教程/" style="font-size: 10px;">教程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/27/golang的strings原码/">golang的strings原码</a>
          </li>
        
          <li>
            <a href="/2018/01/26/发表文章/">发表文章</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Shi Ruitao<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>